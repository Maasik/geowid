                         === Интерактивная web-карта ===
     отображения доступа пользователей к магазинам Ecwid в реальном времени

Состоит из:
1. java-демона (вычитывает обновления из лога, парсит их и резолвит ip-адреса в
   геокоординаты)
2. сервлета для jetty7+ (работает на long-polling посредством API jetty)
3. веб-морды

Для работы необходимо:
1. oracle java1.6+
2. jetty7+

Быстрый старт
-------------
0. собрать проект ant'ом с помощью geowid.xml. Потребуется Ant-Contrib
   (инструкции по установке на http://ant-contrib.sourceforge.net/)
1. Разворачиваем демон (артефакт находится в geowidd/)
    - правим etc/geowid_daemon_settings.xml:
        log-file-catalog    указать каталог расположения файла лога
        log-file-pattern    указать регулярку, соответствующую имени файла лога
        ip-resolver-db      указать путь к файлу базы данных Maxmind
                            для резолва ip
        server-url          указать url, по которому демон будет POST'ить
                            новые данные из лога в формате JSON
        events              описываем отображаемые события лога (их типы и
                            регулярки с выделением ip как group #1)
    - правим geowidd.sh в соответствии с требованиями
      (подробности в комментариях скрипта)
    - запускаем:
        (возможно понадобится chmod +x ./geowidd.sh)
        ./geowidd.sh start
      логи бережно складируются по соседству

2. Разворачиваем серверную часть (артефакт находится в geowidsrv/)
    - помещаем root.war в $JETTY_HOME/webapps/
    - cd $JETTY_HOME
      java -jar start.jar

mTroubleshooting
----------------
! Ничего не работает!
+ Проверьте логи. Обычно проблемы связаны с неверным конфигурированием демона,
  ненастроенным файерволом и т.п.

! Где искать логи сервера?
+ Правильно сконфигурировали $JETTY_HOME/etc/jetty-logging.xml?
  Документация jetty поможет. После этого запустите jetty с параметром
  etc/jetty-logging.xml, например
        java -jar start.jar etc/jetty-logging.xml

mFAQ
----
? А почему карта криво отображается/тормозит/повесила мой браузер/повесила
  мою систему<strike>/сожгла мой CPU</strike>?
! Потому что активно использует динамическую SVG. Соответственно, может
  некорректно отображаться в IE ниже 9, например.
  Автор знает об этом. Есть мысль переделать с использованием
  html5 canvas-анимации, что значительно снизит нагрузку на cpu,
  однако будет нещадно кушать память.